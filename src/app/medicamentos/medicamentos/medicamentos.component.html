<nav class="barra-navegacao">
  <div class="secao-logo">
    <div class="container-logo">
      <i class="fas fa-pills icone-logo"></i>
      <h1>Farma Gilson</h1>
    </div>
  </div>
  
  <div class="secao-busca">
    <div class="container-busca">
      <i class="fas fa-search icone-busca"></i>
      <input 
        type="text" 
        placeholder="Buscar medicamentos, vitaminas, cosméticos..."
        [(ngModel)]="termoPesquisa"
        (input)="filtrarProdutos(filtroAtivo)">
      <button class="limpar-busca prominente" *ngIf="termoPesquisa.length > 0" (click)="limparPesquisa()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="sugestoes-busca" *ngIf="termoPesquisa.length >= 2 && produtosFiltrados.length === 0">
      <p>Nenhum produto encontrado para "{{ termoPesquisa }}"</p>
      <div class="lista-sugestoes">
        <span>Sugestões:</span>
        <button class="botao-sugestao" (click)="termoPesquisa = 'dor'">Dor</button>
        <button class="botao-sugestao" (click)="termoPesquisa = 'febre'">Febre</button>
        <button class="botao-sugestao" (click)="termoPesquisa = 'pressão'">Pressão</button>
        <button class="botao-sugestao" (click)="termoPesquisa = 'diabetes'">Diabetes</button>
      </div>
    </div>
  </div>
  
  <div class="botoes-navegacao">
    <div class="botao-nav" (click)="voltar()">
      <i class="fas fa-arrow-left"></i>
      <span>Voltar</span>
    </div>
    <div class="botao-nav botao-carrinho" (click)="abrirCarrinho()">
      <i class="fas fa-shopping-cart"></i>
      <span>Carrinho ({{ contadorCarrinho }})</span>
      <div class="selo-carrinho" *ngIf="contadorCarrinho > 0">{{ contadorCarrinho }}</div>
    </div>
  </div>
</nav>

<div class="modal" *ngIf="modalAberto" (click)="fecharCarrinho()">
  <div class="conteudo-modal" (click)="$event.stopPropagation()">
    <div class="cabecalho-modal">
      <h3><i class="fas fa-shopping-cart"></i> Seu Carrinho</h3>
      <button class="botao-fechar" (click)="fecharCarrinho()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="itens-carrinho" *ngIf="carrinho.length > 0; else carrinhoVazio">
      <div class="item-carrinho" *ngFor="let item of carrinho; let i = index">
        <div class="info-item">
          <h4>{{ item.nome }}</h4>
          <span class="quantidade-item">Quantidade: {{ item.quantidade }}</span>
        </div>
        <button class="botao-remover" (click)="removerDoCarrinho(i)">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
    
    <ng-template #carrinhoVazio>
      <div class="carrinho-vazio">
        <i class="fas fa-shopping-cart icone-vazio"></i>
        <p>Seu carrinho está vazio</p>
      </div>
    </ng-template>
    
    <div class="rodape-modal" *ngIf="carrinho.length > 0">
      <button class="botao botao-secundario" (click)="fecharCarrinho()">
        <i class="fas fa-arrow-left"></i> Continuar Comprando
      </button>
      <button class="botao botao-primario" (click)="finalizarCompra()">
        <i class="fas fa-credit-card"></i> Finalizar Compra
      </button>
    </div>
  </div>
</div>

<div class="modal" *ngIf="modalFinalizarAberto" (click)="fecharModalFinalizar()">
  <div class="conteudo-modal modal-formulario" (click)="$event.stopPropagation()">
    <div class="cabecalho-modal">
      <h3><i class="fas fa-file-alt"></i> Dados para Entrega</h3>
      <button class="botao-fechar" (click)="fecharModalFinalizar()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <form class="formulario-cliente">
      <div class="campo-formulario">
        <label><i class="fas fa-user"></i> Nome Completo *</label>
        <input type="text" [(ngModel)]="clienteForm.nome" name="nome" placeholder="Digite seu nome completo" required>
      </div>
      
      <div class="campo-formulario">
        <label><i class="fas fa-envelope"></i> Email *</label>
        <input type="email" [(ngModel)]="clienteForm.email" name="email" placeholder="seu@email.com" required>
      </div>
      
      <div class="campo-formulario">
        <label><i class="fas fa-phone"></i> Telefone *</label>
        <input type="tel" [(ngModel)]="clienteForm.telefone" name="telefone" placeholder="(00) 00000-0000" required>
      </div>

      <div class="campo-formulario">
        <label><i class="fas fa-truck"></i> Tipo de Entrega *</label>
        <div class="opcoes-entrega">
          <label class="opcao-radio">
            <input type="radio" [(ngModel)]="clienteForm.tipoEntrega" name="tipoEntrega" value="retirada">
            <span><i class="fas fa-store"></i> Retirar na Loja</span>
          </label>
          <label class="opcao-radio">
            <input type="radio" [(ngModel)]="clienteForm.tipoEntrega" name="tipoEntrega" value="delivery">
            <span><i class="fas fa-motorcycle"></i> Delivery</span>
          </label>
        </div>
      </div>
      
      <div class="campo-formulario" *ngIf="clienteForm.tipoEntrega === 'delivery'">
        <label><i class="fas fa-map-marker-alt"></i> Endereço Completo *</label>
        <textarea [(ngModel)]="clienteForm.endereco" name="endereco" placeholder="Rua, número, bairro, cidade" rows="3" required></textarea>
      </div>

      <div class="campo-formulario">
        <label><i class="fas fa-credit-card"></i> Método de Pagamento *</label>
        <div class="opcoes-pagamento">
          <label class="opcao-radio">
            <input type="radio" [(ngModel)]="clienteForm.metodoPagamento" name="metodoPagamento" value="dinheiro">
            <span><i class="fas fa-money-bill-wave"></i> Dinheiro</span>
          </label>
          <label class="opcao-radio">
            <input type="radio" [(ngModel)]="clienteForm.metodoPagamento" name="metodoPagamento" value="pix">
            <span><i class="fas fa-qrcode"></i> PIX</span>
          </label>
        </div>
      </div>
      
      <div class="resumo-pedido">
        <div style="display: flex; justify-content: space-evenly;">
          <h4><strong><i class="fas fa-clipboard-list"></i> Resumo do Pedido</strong></h4>
          <h4><strong>Total: R$ {{ calcularPrecoTotal() | number:'1.2-2' }}</strong></h4>
        </div>
        <div class="itens-resumo">
          <p *ngFor="let item of carrinho">
            {{ item.nome }} - Qtd: {{ item.quantidade }}
          </p>
        </div>
      </div>

      <div class="qrcode-pix-container" *ngIf="mostrarQRCodePix">
        <h4><i class="fas fa-qrcode"></i> Pagamento PIX</h4>
        
        <div class="opcoes-pix">
          <div class="opcao-pix">
            <h5><i class="fas fa-camera"></i> Escaneie o QR Code</h5>
            <img [src]="qrCodePixData" alt="QR Code PIX" class="qrcode-image">
          </div>
          
          
          <div class="opcao-pix">
            <h5><i class="fas fa-copy"></i> PIX Copia e Cola</h5>
            <div class="codigo-pix-container">
              <textarea 
                class="codigo-pix" 
                [value]="pixCopiaCola" 
                readonly
                rows="4"></textarea>
              <button class="botao-copiar" (click)="copiarCodigoPix()">
                <i class="fas fa-copy"></i> Copiar Código
              </button>
            </div>
          </div>
        </div>
        
        <p class="instrucoes-pix">
          <i class="fas fa-info-circle"></i> 
          Abra o app do seu banco, escaneie o QR Code OU cole o código PIX e confirme o pagamento
        </p>
        <button class="botao botao-sucesso" (click)="confirmarPagamentoPix()">
          <i class="fas fa-check-circle"></i> Já Paguei
        </button>
      </div>
    </form>
    
    <div class="rodape-modal" *ngIf="!mostrarQRCodePix">
      <button class="botao botao-secundario" (click)="fecharModalFinalizar()">
        <i class="fas fa-times"></i> Cancelar
      </button>
      <button class="botao botao-primario" (click)="enviarPedido()">
        <i class="fas fa-paper-plane"></i> 
        {{ clienteForm.metodoPagamento === 'pix' ? 'Gerar QR Code PIX' : 'Enviar Pedido' }}
      </button>
    </div>
  </div>
</div>

<header class="cabecalho-principal">
  <div class="conteudo-cabecalho">
    <div class="texto-cabecalho">
      <h1>Farmácia Gilson</h1>
      <p>Sua saúde é nossa prioridade. Medicamentos com qualidade e preços acessíveis.</p>
    </div>
    <div class="recursos-cabecalho">
      <div class="recurso">
        <i class="fas fa-truck"></i>
        <span>Entrega Rápida</span>
      </div>
      <div class="recurso">
        <i class="fas fa-shield-alt"></i>
        <span>Produtos Originais</span>
      </div>
      <div class="recurso">
        <i class="fas fa-clock"></i>
        <span>Atendimento 24h</span>
      </div>
    </div>
  </div>
</header>

<section class="categorias">
  <div class="container">
    <h2>Categorias</h2>
    <div class="grade-categoria">
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Todos'" 
           (click)="filtrarPorCategoria('Todos')">
        <i class="fas fa-th-large"></i>
        <span>Todos</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Medicamentos'" 
           (click)="filtrarPorCategoria('Medicamentos')">
        <i class="fas fa-pills"></i>
        <span>Medicamentos</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Vitaminas'" 
           (click)="filtrarPorCategoria('Vitaminas')">
        <i class="fas fa-heart"></i>
        <span>Vitaminas</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Infantil'" 
           (click)="filtrarPorCategoria('Infantil')">
        <i class="fas fa-baby"></i>
        <span>Infantil</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Higiene'" 
           (click)="filtrarPorCategoria('Higiene')">
        <i class="fas fa-soap"></i>
        <span>Higiene</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Cosméticos'" 
           (click)="filtrarPorCategoria('Cosméticos')">
        <i class="fas fa-eye"></i>
        <span>Cosméticos</span>
      </div>
      <div class="item-categoria" 
           [class.ativo]="categoriaAtiva === 'Bucal'" 
           (click)="filtrarPorCategoria('Bucal')">
        <i class="fas fa-tooth"></i>
        <span>Bucal</span>
      </div>
    </div>
  </div>
</section>

<section class="promocoes">
  <div class="container">
    <div class="banner-promocao">
      <div class="conteudo-promocao">
        <div class="icone-promocao">
          <i class="fas fa-fire"></i>
        </div>
        <div class="texto-promocao">
          <h2>Promoções da Semana</h2>
          <p>Descontos especiais em medicamentos selecionados. Entrega grátis para compras acima de R$ 50,00!</p>
        </div>
        <div class="selo-promocao">
          <span>ATÉ 30% OFF</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="secao-produtos" id="secao-produtos">
  <div class="container">
    <div class="cabecalho-secao">
      <div class="resultados-busca" *ngIf="termoPesquisa.length > 0 || categoriaAtiva !== 'Todos'">
        <h2 *ngIf="termoPesquisa.length > 0">
          Resultados para "{{ termoPesquisa }}" ({{ produtosFiltrados.length }} encontrados)
        </h2>
        <h2 *ngIf="termoPesquisa.length === 0 && categoriaAtiva !== 'Todos'">
          {{ categoriaAtiva }} ({{ produtosFiltrados.length }} produtos)
        </h2>
        <button class="botao-filtro" style="margin-bottom: 30px;" (click)="limparTodosFiltros()">
          <i class="fas fa-times"></i> Limpar filtros
        </button>
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
        <h2 *ngIf="termoPesquisa.length === 0 && categoriaAtiva === 'Todos'">Nossos Medicamentos</h2>
        <button class="botao-filtro" (click)="carregarProdutos()" [disabled]="carregandoProdutos">
          <i class="fas fa-sync-alt" [class.fa-spin]="carregandoProdutos"></i> 
          {{ carregandoProdutos ? 'Carregando...' : 'Atualizar' }}
        </button>
      </div>
      
      <div class="opcoes-filtro">
        <button 
          class="botao-filtro" 
          [class.ativo]="filtroAtivo === 'Todos'"
          (click)="filtrarProdutos('Todos')">
          Todos
        </button>
        <button 
          class="botao-filtro" 
          [class.ativo]="filtroAtivo === 'Genéricos'"
          (click)="filtrarProdutos('Genéricos')">
          Genéricos
        </button>
        <button 
          class="botao-filtro" 
          [class.ativo]="filtroAtivo === 'Referência'"
          (click)="filtrarProdutos('Referência')">
          Referência
        </button>
        <button 
          class="botao-filtro" 
          [class.ativo]="filtroAtivo === 'Similares'"
          (click)="filtrarProdutos('Similares')">
          Similares
        </button>
      </div>
    </div>
    
    <div class="nenhum-produto" *ngIf="produtosFiltrados.length === 0 && termoPesquisa.length > 0">
      <div class="conteudo-nenhum-produto">
        <i class="fas fa-search icone-nenhum-produto"></i>
        <h3>Nenhum produto encontrado</h3>
        <p>Não encontramos medicamentos para sua pesquisa.</p>
        <button class="botao botao-primario" (click)="limparPesquisa()">
          <i class="fas fa-refresh"></i> Ver todos os produtos
        </button>
      </div>
    </div>
    
    <div class="grade-produtos" *ngIf="produtosFiltrados.length > 0">
      <div class="cartao-produto" *ngFor="let produto of produtosFiltrados">
        <div class="imagem-produto">
          <img [src]="produto.imagem" [alt]="produto.nome">
          <div class="selo-produto" *ngIf="produto.promocao">
            <span>-{{ produto.desconto }}%</span>
          </div>
        </div>
        
        <div class="info-produto">
          <h3>{{ produto.nome }}</h3>
          <p class="descricao-produto">{{ produto.descricao }}</p>
          
          <div class="detalhes-produto">
            <div class="secao-preco">
              <span class="preco-atual">{{ produto.preco }}</span>
              <span class="preco-antigo" *ngIf="produto.precoAntigo">{{ produto.precoAntigo }}</span>
            </div>
            
            <div class="info-estoque">
              <i class="fas fa-box" [class.estoque-baixo]="produto.quantidade < 5"></i>
              <span [class.estoque-baixo]="produto.quantidade < 5">
                {{ produto.quantidade }} em estoque
              </span>
            </div>
          </div>
          
          <div class="acoes-produto">
            <button class="botao botao-primario" (click)="adicionarAoCarrinho(produto.nome)" [disabled]="produto.quantidade === 0">
              <i class="fas fa-cart-plus"></i>
              {{ produto.quantidade === 0 ? 'Indisponível' : 'Adicionar ao Carrinho' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="info-seguranca">
  <div class="container">
    <div class="conteudo-seguranca">
      <div class="icone-seguranca">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="texto-seguranca">
        <h3>Importante</h3>
        <p>Medicamentos podem causar efeitos indesejados. Evite a automedicação: informe-se com o farmacêutico.</p>
      </div>
    </div>
  </div>
</section>

<footer class="rodape-principal">
  <div class="conteudo-rodape">
    <div class="secao-rodape">
      <h4>Farmácia Gilson</h4>
      <p>Compromisso com sua saúde e bem-estar há mais de 20 anos.</p>
      <div class="links-sociais">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-whatsapp"></i></a>
      </div>
    </div>
    
    <div class="secao-rodape">
      <h4>Atendimento</h4>
      <p><i class="fas fa-phone"></i> (89) 99461-0025</p>
      <p><i class="fas fa-envelope"></i> contato&#64;farmagilson.com</p>
      <p><i class="fas fa-clock"></i> Seg-Dom: 24 horas</p>
    </div>
    
    <div class="secao-rodape">
      <h4>Endereço</h4>
      <p><i class="fas fa-map-marker-alt"></i> R. Cel. Antônio Rodrigues, 28</p>
      <p>Centro, Picos - PI</p>
      <p>CEP: 64600-028</p>
    </div>
    
    <div class="secao-rodape">
      <h4>Certificações</h4>
      <div class="certificacoes">
        <div class="item-certificacao">
          <i class="fas fa-certificate"></i>
          <span>ANVISA</span>
        </div>
        <div class="item-certificacao">
          <i class="fas fa-shield-alt"></i>
          <span>CRF-PI</span>
        </div>
      </div>
    </div>
  </div>
  
  <div class="parte-inferior-rodape">
    <p>&copy; 2025 Farmácia Gilson. Todos os direitos reservados.</p>
    <p>CNPJ: 12.345.678/0001-90 | Responsável Técnico: Dr. Gilson Silva - CRF-PI 12345</p>
  </div>
</footer>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">